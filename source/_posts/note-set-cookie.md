---
title: 关于Set-Cookie无法保存
date: 2018-09-28 10:41:29
tags: [http]
---
出现这个问题大多是不满足同源策略，即从**www.A.com**向**www.B.com**或从**m.A.com**向**e.A.com**或从**A.com:8080**向**A.com:8086**等等设置**Cookie**，这些情况由于协议或域名或端口不同而被阻止设置。网上很多解决办法，不再赘述。

记一下今天自己遇到的坑：

首先，代码里写着`axios.post('http://192.168.0.86:9000/api/user/login')`，而前端运行在`192.168.0.86:8000`，接口响应头存在**Set-Cookie**，但浏览器无法保存，完全符合预期。

之后，为了能设置**Cookie**，转而用**Nginx**代理，以下是代理配置：
```
server {
  location ^~ /api/ {
    proxy_pass http://localhost:9000;
  }
}
```
但还是无法保存。

本以为路径`/api`走代理了，域就会等同于`http://192.168.0.86:8000`，结果还是`axios`填写的地址。

最后把`axios`里的地址去掉，只保留路径就对了。
